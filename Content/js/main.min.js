$(document).ready(function(){main.init()});var main={percent:parseInt($("body").attr("data-percent")),init:function(){this.domEvents(),$(".diffpercent").text(main.percent)},domEvents:function(){$(".calculator button").click(main.showResult),$(".calculator .gender").click(function(){self=$(this),self.hasClass("active")||(self.parent().find(".active").removeClass("active"),self.addClass("active"),$(".diagram .active").removeClass("active"),gender=self.attr("data-gender"),$(".result-diagram."+gender).addClass("active"))}),$(".share").click(function(){var e=$(".title.step2").text(),t=$(".info p").text();main.shareOverrideOGMeta(e,t)})},showResult:function(){var e=$("section.calculator .gender.active").hasClass("woman"),t="less",n="woman",i="man",s=($("select").val(),$("select").val().split("-")),a=[],r=[],o=[];$.each(s,function(e,t){var n=parseInt(t);s[e]=parseInt(t),a[e]=n*(100+main.percent)/100,r[e]=n*(100-main.percent)/100});var c=main.calculateDifference(s);$(".result-diagram.active .salary-name").text("Your Salary"),$(".result-diagram.active .salary").text(main.convertArrayToString(s)),$(".title .salary").text(main.convertArrayToString(c)),$(".title .salary-real").text(main.convertArrayToString(s)),o=r,e&&($(".result-diagram.active .salary-name"),n="man",i="woman",t="more",o=a),$(".title .sex").text(n),$(".title .sex-real").text(i),$(".title .moreless").text(t),$(".result-diagram:not(.active ) .salary").text(main.convertArrayToString(o)),main.setFimaleDiagramWidth(),main.changeSections(),setTimeout(function(){main.showFirstDiagram()},300),setTimeout(function(){main.showSecondDiagram()},4e3)},setFimaleDiagramWidth:function(){var e=100-main.percent;$(".specialwidth").attr("style","width: "+e+"%")},convertArrayToString:function(e){return 1===e.length?e[0]+"+":e[0]+"-"+e[1]},calculateDifference:function(e){return e=e.map(function(e){return e*main.percent/100})},getAvg:function(e){return sum=e.reduce(function(e,t){return e+t}),avg=sum/e.length,avg},changeSections:function(){$("section").addClass("animationg"),setTimeout(function(){$(".calculator").removeClass("active").addClass("hidden"),$("section.result").removeClass("hidden").addClass("active")},100),setTimeout(function(){$("section").removeClass("animationg")},200)},showFirstDiagram:function(){$(".result-diagram.active").addClass("opacity"),setTimeout(function(){$(".result-diagram.active .result-inner").addClass("animate").removeClass("stopanimation")},600)},showSecondDiagram:function(){$(".result-diagram:not(.active)").addClass("opacity"),$(".result-diagram:not(.active) .result-inner").addClass("animate").removeClass("stopanimation"),setTimeout(function(){main.changeText()},2500)},changeText:function(){$(".title.step1").removeClass("active"),setTimeout(function(){$(".title.step1").addClass("hidden"),$(".title.step2").removeClass("hidden")},500),setTimeout(function(){$(".title.step2").addClass("active")},650)},shareOverrideOGMeta:function(e,t){FB.ui({method:"share_open_graph",action_type:"og.likes",action_properties:JSON.stringify({object:{"og:title":e,"og:description":t}})},function(e){})}},account={controllerPath:"Account/",checkPersonalIdPath:"checkPersonalId/",checkMobile:"checkMobileNumber/",checkSmsCode:"checkSmsCode/",idNumberSelector:$("#id-number"),mobileSelector:$("#mobile-number"),smsCodeSelector:$("#sms-code"),smsMobileSelector:$("#sms-mobile"),init:function(){this.domEvents(),console.log("account inited!")},domEvents:function(){this.idNumberSelector.keyup(function(){var e=$(this).val();if(11===e.length){main.startLoading();var t=Path+account.controllerPath+account.checkPersonalIdPath;$.post(t,{personalId:e},account.checkPersonalIdCallback)}}),this.idNumberSelector.keypress(function(e){if(11===$(this).val().length)return!1}),this.mobileSelector.keyup(function(){var e=$(this).val();if(9===e.length){main.startLoading();var t=Path+account.controllerPath+account.checkMobile;$.post(t,{personalId:e},account.checkMobileCallback),account.smsMobileSelector.val(e)}}),this.mobileSelector.keypress(function(e){if(9===$(this).val().length)return!1}),this.smsCodeSelector.keyup(function(){var e=$(this).val();if(4===e.length){main.startLoading();var t=Path+account.controllerPath+account.checkSmsCode;$.post(t,{personalId:e},account.checkSmsCodeCallback)}}),this.smsCodeSelector.keypress(function(e){if(4===$(this).val().length)return!1})},checkPersonalIdCallback:function(e,t){main.endLoading(),"success"===t&&(e.success?$(".account-wrapper").addClass("step2"):main.showPopup(e.message))},checkMobileCallback:function(e,t){main.endLoading(),"success"===t&&(e.success?$(".account-wrapper").addClass("step3"):main.showPopup(e.message))},checkSmsCodeCallback:function(e,t){"success"===t&&(e.success?main.initUser():(main.endLoading(),main.showPopup(e.message)))}};contact={oldFb:"",oldTw:"",oldIns:"",oldOth:"",saveListener:$(".contact .success"),cancelListener:$(".contact .cancel"),inputs:$(".contact input"),wrapper:$(".contact"),buttons:$(".contact .buttons-wrapper"),ControllerPath:"Profile/",ActionPath:"UpdateContact/",init:function(){this.domEvents()},domEvents:function(){this.inputs.keyup(function(){contact.checkChanges()}),this.inputs.focus(function(){$(".contact input.changed").length||(contact.oldFb=contact.wrapper.find(".fb-link").val(),contact.oldTw=contact.wrapper.find(".tw").val(),contact.oldIns=contact.wrapper.find(".insta").val(),contact.oldOth=contact.wrapper.find(".oth").val())}),this.saveListener.click(function(){contact.save()}),this.cancelListener.click(function(){contact.cancelSave()})},save:function(){if(!contact.validateLinks())return console.log("Form is not valid !!"),!1;main.startLoading();var e=this.checkChanges();console.log("data to send",e);var t=Path+contact.ControllerPath+contact.ActionPath;$.post(t,e,function(e,t){"success"===t&&(e.success?(contact.buttons.removeClass("active"),contact.inputs.removeClass("changed")):main.showPopup(e.message)),main.endLoading()})},cancelSave:function(){contact.wrapper.find(".fb-link").val(contact.oldFb),contact.wrapper.find(".tw").val(contact.oldTw),contact.wrapper.find(".insta").val(contact.oldIns),contact.wrapper.find(".oth").val(contact.oldOth),contact.buttons.removeClass("active"),contact.inputs.removeClass("changed hasError")},startEditing:function(){},checkChanges:function(){var e=this.wrapper.find(".fb-link"),t=this.wrapper.find(".tw"),n=this.wrapper.find(".insta"),i=this.wrapper.find(".oth"),s=this.checkAndModifyLink(e,this.oldFb)&&this.checkAndModifyLink(t,this.oldTw)&&this.checkAndModifyLink(n,this.oldIns)&&this.checkAndModifyLink(i,this.oldOth);if(console.log("isChanged",s),!s)return this.buttons.addClass("active"),{fb:e.val(),tw:t.val(),ins:n.val(),oth:i.val()};this.buttons.removeClass("active")},checkAndModifyLink:function(e,t){return console.log("oldVal",t),console.log("element val",e.val()),t===e.val()||(e.addClass("changed"),!1)},checkFBUrl:function(e){var t=/^(https?:\/\/)?((w{3}\.)?)facebook.com\/.*/i.test(e),n=/^(https?:\/\/)?((web\.)?)facebook.com\/.*/i.test(e),i=/^(https?:\/\/)?((m\.)?)facebook.com\/.*/i.test(e);return t||n||i},checkTwitterUrl:function(e){return/^(https?:\/\/)?((w{3}\.)?)twitter.com\/.*/i.test(e)},checkInstaUrl:function(e){return/^(https?:\/\/)?((w{3}\.)?)instagram.com\/.*/i.test(e)},validateLinks:function(){var t=!0;return $(".contact input.changed").each(function(){var e=$(this);contact.isValidLink(e)?e.removeClass("hasError"):(t=!1,e.addClass("hasError"))}),t},checkOtherLink:function(e){return regexp=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/,!!regexp.test(e)},isValidLink:function(e){var t=e.val();return e.hasClass("fb-link")?(console.log("validation fb"),contact.checkFBUrl(t)):e.hasClass("tw")?contact.checkTwitterUrl(t):e.hasClass("insta")?contact.checkInstaUrl(t):e.hasClass("oth")?contact.checkOtherLink(t):void 0}},header={oldUsername:"",oldDescription:"",saveListener:$(".header .success"),cancelListener:$(".header .cancel"),inputs:$(".header textarea, .header input"),wrapper:$(".header"),buttons:$(".header .buttons-wrapper"),ControllerPath:"Profile/",ActionPath:"UpdateHeader/",init:function(){this.domEvents(),$(".header textarea").each(function(){$(this).height($(this).prop("scrollHeight"))})},domEvents:function(){this.inputs.keyup(function(){header.checkChanges()}),this.inputs.focus(function(){$(".header textarea.changed").length||(header.oldUsername=header.wrapper.find("input[type='text']").val(),header.oldDescription=header.wrapper.find("textarea").val())}),this.saveListener.click(function(){header.save()}),this.cancelListener.click(function(){header.cancelSave()})},save:function(){if(!header.validateInputs())return console.log("Form is not valid !!"),!1;main.startLoading();var e=this.checkChanges();console.log("data to send",e);var t=Path+header.ControllerPath+header.ActionPath;$.post(t,e,function(e,t){"success"===t&&(e.success?(header.buttons.removeClass("active"),header.inputs.removeClass("changed")):main.showPopup(e.message)),main.endLoading(),main.resizeTextarea(header.wrapper.find("textarea"))})},cancelSave:function(){header.wrapper.find("input[type='text']").val(header.oldUsername),header.wrapper.find("textarea").val(header.oldDescription),header.buttons.removeClass("active"),header.inputs.removeClass("changed hasError"),main.resizeTextarea(header.wrapper.find("textarea"))},checkChanges:function(){var e=this.wrapper.find("input[type='text']"),t=this.wrapper.find("textarea"),n=this.checkAndModifyLink(e,this.oldUsername)&&this.checkAndModifyLink(t,this.oldDescription);if(console.log("isChanged",n),!n)return this.buttons.addClass("active"),{username:e.val(),description:t.val()};this.buttons.removeClass("active")},checkAndModifyLink:function(e,t){return t===e.val()||(e.addClass("changed"),!1)},validateInputs:function(){var t=!0;return $(".header textarea.changed").each(function(){var e=$(this);header.isValidText(e)?e.removeClass("hasError"):(t=!1,e.addClass("hasError"))}),t},isValidText:function(e){return 0<e.val().trim().length}},projects={addNewListener:".projects .add-new",templateItem:$(".projects .template.editor"),templateItemReady:$(".projects .template.text"),itemsContainer:$(".projects .section-data"),instructions:$(".projects .sectin-instructions"),saveItemListener:".projects .editor .success",cancelItemListener:".projects .editor .cancel",editor:".projects .editor",editorFields:".projects .section-data .editor .required",editingElement:".projects .section-data .being-edited",deleteListener:".projects .delete",editListener:".projects .edit",controllerPath:"Projects/",deleteAction:"Delete/",init:function(){this.domEvents()},domEvents:function(){$("body").on("click",this.addNewListener,function(){projects.createAndFillEditor()}),$("body").on("click",this.saveItemListener,function(){projects.validateForm()&&projects.saveChanges()}),$("body").on("click",this.cancelItemListener,function(){projects.itemsContainer.find(".editor").remove(),projects.itemsContainer.find(".being-edited").removeClass("being-edited"),projects.viewHideInstructions()}),$("body").on("click",this.deleteListener,function(){var e=$(this).closest(".item");projects.deleteItem(e)}),$("body").on("click",this.editListener,function(){var e=$(this).closest(".item");projects.editItem(e)})},createAndFillEditor:function(){var e=projects.templateItem.clone();e.removeClass("hidden template"),projects.itemsContainer.append(e),setTimeout(function(){projects.itemsContainer.find(".editor").addClass("editing")},100),projects.viewHideInstructions();var t=$(projects.editingElement),n=1===t.length;if(console.log("is edit",n),n){var i=projects.itemsContainer.find(".editor");i.find(".title").val(t.find(".title").text()),i.find(".description").val(t.find(".description").text())}},viewHideInstructions:function(){this.itemsContainer.find(".item").length?this.instructions.addClass("hidden"):this.instructions.removeClass("hidden")},validateForm:function(){var t=!0;return $(projects.editorFields).each(function(){var e=$(this);0===e.val().trim().length?(t=!1,e.addClass("hasError")):e.removeClass("hasError")}),t},saveChanges:function(){var e=$(projects.editingElement),t=1===e.length;t||(e=projects.templateItemReady.clone()).removeClass("template hidden");var n=projects.itemsContainer.find(".editor");e.find(".title").text(n.find(".title").val()),e.find(".description").text(n.find(".description").val()),t?e.removeClass("being-edited"):projects.itemsContainer.append(e),n.remove(),projects.viewHideInstructions()},deleteItem:function(n){var e=Path+projects.controllerPath+projects.deleteAction;main.startLoading(),$.post(e,{personalId:1},function(e,t){"success"===t&&(e.success?(n.remove(),projects.viewHideInstructions()):main.showPopup(e.message)),main.endLoading()})},editItem:function(e){e.addClass("being-edited"),projects.createAndFillEditor()}},references={addNewListener:".reference .add-new",templateItem:$(".reference .template.editor"),templateItemReady:$(".reference .template.text"),itemsContainer:$(".reference .section-data"),instructions:$(".reference .sectin-instructions"),saveItemListener:".reference .editor .success",cancelItemListener:".reference .editor .cancel",editor:".reference .editor",editorFields:".reference .section-data .editor .required",editingElement:".reference .section-data .being-edited",deleteListener:".reference .delete",editListener:".reference .edit",controllerPath:"References/",deleteAction:"Delete/",init:function(){this.domEvents()},domEvents:function(){$("body").on("click",this.addNewListener,function(){references.createAndFillEditor()}),$("body").on("click",this.saveItemListener,function(){references.validateForm()&&references.saveChanges()}),$("body").on("click",this.cancelItemListener,function(){references.itemsContainer.find(".editor").remove(),references.itemsContainer.find(".being-edited").removeClass("being-edited"),references.viewHideInstructions()}),$("body").on("click",this.deleteListener,function(){var e=$(this).closest(".item");references.deleteItem(e)}),$("body").on("click",this.editListener,function(){var e=$(this).closest(".item");references.editItem(e)})},createAndFillEditor:function(){var e=references.templateItem.clone();e.removeClass("hidden template"),references.itemsContainer.append(e),setTimeout(function(){references.itemsContainer.find(".editor").addClass("editing")},100),references.viewHideInstructions();var t=$(references.editingElement),n=1===t.length;if(console.log("is edit",n),n){var i=references.itemsContainer.find(".editor");i.find(".title").val(t.find(".title").text()),i.find(".position").val(t.find(".position").text()),i.find(".description").val(t.find(".description").text())}},viewHideInstructions:function(){this.itemsContainer.find(".item").length?this.instructions.addClass("hidden"):this.instructions.removeClass("hidden")},validateForm:function(){var t=!0;return $(references.editorFields).each(function(){var e=$(this);0===e.val().trim().length?(t=!1,e.addClass("hasError")):e.removeClass("hasError")}),t},saveChanges:function(){var e=$(references.editingElement),t=1===e.length;t||(e=references.templateItemReady.clone()).removeClass("template hidden");var n=references.itemsContainer.find(".editor");e.find(".title").text(n.find(".title").val()),e.find(".position").text(n.find(".position").val()),e.find(".description").text(n.find(".description").val()),t?e.removeClass("being-edited"):references.itemsContainer.append(e),n.remove(),references.viewHideInstructions()},deleteItem:function(n){var e=Path+references.controllerPath+references.deleteAction;main.startLoading(),$.post(e,{personalId:1},function(e,t){"success"===t&&(e.success?(n.remove(),references.viewHideInstructions()):main.showPopup(e.message)),main.endLoading()})},editItem:function(e){e.addClass("being-edited"),references.createAndFillEditor()}},skills={oldFeatures:"",oldOthers:"",saveListener:$(".skills .success"),cancelListener:$(".skills .cancel"),inputs:$(".skills textarea"),wrapper:$(".skills"),buttons:$(".skills .buttons-wrapper"),ControllerPath:"Profile/",ActionPath:"UpdateSkills/",init:function(){this.domEvents(),$(".skills textarea").each(function(){$(this).height($(this).prop("scrollHeight"))})},domEvents:function(){this.inputs.keyup(function(){skills.checkChanges()}),this.inputs.focus(function(){$(".skills textarea.changed").length||(skills.oldFeatures=skills.wrapper.find(".features").val(),skills.oldOthers=skills.wrapper.find(".others").val())}),this.saveListener.click(function(){skills.save()}),this.cancelListener.click(function(){skills.cancelSave()})},save:function(){if(!skills.validateInputs())return console.log("Form is not valid !!"),!1;main.startLoading();var e=this.checkChanges();console.log("data to send",e);var t=Path+skills.ControllerPath+skills.ActionPath;$.post(t,e,function(e,t){"success"===t&&(e.success?(skills.buttons.removeClass("active"),skills.inputs.removeClass("changed")):main.showPopup(e.message)),main.endLoading(),skills.inputs.each(function(){main.resizeTextarea($(this))})})},cancelSave:function(){skills.wrapper.find(".features").val(skills.oldFeatures),skills.wrapper.find(".others").val(skills.oldOthers),skills.buttons.removeClass("active"),skills.inputs.removeClass("changed hasError"),skills.inputs.each(function(){main.resizeTextarea($(this))})},checkChanges:function(){var e=this.wrapper.find(".features"),t=this.wrapper.find(".others"),n=this.checkAndModifyLink(e,this.oldFeatures)&&this.checkAndModifyLink(t,this.oldOthers);if(console.log("isChanged",n),!n)return this.buttons.addClass("active"),{features:e.val(),others:t.val()};this.buttons.removeClass("active")},checkAndModifyLink:function(e,t){return t===e.val()||(e.addClass("changed"),!1)},validateInputs:function(){var t=!0;return $(".skills textarea.changed").each(function(){var e=$(this);skills.isValidText(e)?e.removeClass("hasError"):(t=!1,e.addClass("hasError"))}),t},isValidText:function(e){return 0<e.val().trim().length}},userInfo={navigationListener:".navigation a",init:function(){this.domEvenets(),work.init(),projects.init(),references.init(),contact.init(),skills.init(),header.init()},domEvenets:function(){$("body").on("click",this.navigationListener,function(){var e=$(this);if(!e.hasClass("active")){e.parent().find(".active").removeClass("active"),e.addClass("active");var t=e.attr("data-nav");$(".information-wrapper .data-wrapper").attr("data-step",t)}})}},work={addNewListener:".work-experience .add-new",templateItem:$(".work-experience .template.editor"),templateItemReady:$(".work-experience .template.text"),itemsContainer:$(".work-experience .section-data"),instructions:$(".work-experience .sectin-instructions"),saveItemListener:".work-experience .editor .success",cancelItemListener:".work-experience .editor .cancel",editor:".work-experience .editor",editorFields:".work-experience .section-data .editor .required",editingElement:".work-experience .section-data .being-edited",deleteListener:".work-experience .delete",editListener:".work-experience .edit",controllerPath:"Work/",deleteAction:"Delete/",init:function(){this.domEvents()},domEvents:function(){$("body").on("click",this.addNewListener,function(){work.createAndFillEditor()}),$("body").on("click",this.saveItemListener,function(){work.validateForm()&&work.saveChanges()}),$("body").on("click",this.cancelItemListener,function(){work.itemsContainer.find(".editor").remove(),work.itemsContainer.find(".being-edited").removeClass("being-edited"),work.viewHideInstructions()}),$("body").on("click",this.deleteListener,function(){var e=$(this).closest(".item");work.deleteItem(e)}),$("body").on("click",this.editListener,function(){var e=$(this).closest(".item");work.editItem(e)})},createAndFillEditor:function(){var e=work.templateItem.clone();e.removeClass("hidden template"),work.itemsContainer.append(e),setTimeout(function(){work.itemsContainer.find(".editor").addClass("editing")},100),work.viewHideInstructions();var t=$(work.editingElement),n=1===t.length;if(console.log("is edit",n),n){var i=work.itemsContainer.find(".editor");i.find(".title").val(t.find(".title").text()),i.find(".period").val(t.find(".period").text()),i.find(".company").val(t.find(".company").text()),i.find(".description").val(t.find(".description").text())}},viewHideInstructions:function(){this.itemsContainer.find(".item").length?this.instructions.addClass("hidden"):this.instructions.removeClass("hidden")},validateForm:function(){var t=!0;return $(work.editorFields).each(function(){var e=$(this);0===e.val().trim().length?(t=!1,e.addClass("hasError")):e.removeClass("hasError")}),t},saveChanges:function(){var e=$(work.editingElement),t=1===e.length;t||(e=work.templateItemReady.clone()).removeClass("template hidden");var n=work.itemsContainer.find(".editor");e.find(".title").text(n.find(".title").val()),e.find(".period").text(n.find(".period").val()),e.find(".company").text(n.find(".company").val()),e.find(".description").text(n.find(".description").val()),t?e.removeClass("being-edited"):work.itemsContainer.append(e),n.remove(),work.viewHideInstructions()},deleteItem:function(n){var e=Path+work.controllerPath+work.deleteAction;main.startLoading(),$.post(e,{personalId:1},function(e,t){"success"===t&&(e.success?(n.remove(),work.viewHideInstructions()):main.showPopup(e.message)),main.endLoading()})},editItem:function(e){e.addClass("being-edited"),work.createAndFillEditor()}};